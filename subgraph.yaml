specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: cDAIPool
    network: mainnet
    source:
      address: "0x35966201A7724b952455B73A36C8846D8745218e"
      abi: DInterest
      startBlock: 11316134
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - DPoolList
        - DPool
        - User
        - Deposit
        - Funder
        - Funding
        - UserTotalDeposit
        - FunderTotalInterest
      abis:
        - name: DInterest
          file: ./abis/DInterest.json
        - name: IInterestOracle
          file: ./abis/IInterestOracle.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: MPHIssuanceModel01
          file: ./abis/MPHIssuanceModel01.json
      eventHandlers:
        - event: EDeposit(indexed address,indexed uint256,uint256,uint256,uint256,uint256)
          handler: handleEDeposit
        - event: EWithdraw(indexed address,indexed uint256,indexed uint256,bool,uint256)
          handler: handleEWithdraw
        - event: EFund(indexed address,indexed uint256,uint256)
          handler: handleEFund
        - event: ESetParamAddress(indexed address,indexed string,address)
          handler: handleESetParamAddress
        - event: ESetParamUint(indexed address,indexed string,uint256)
          handler: handleESetParamUint
      blockHandlers:
        - handler: handleBlock
      file: ./src/DInterest.ts
  - kind: ethereum/contract
    name: cUSDCPool
    network: mainnet
    source:
      address: "0x374226dbAa3e44bF3923AfB63f5Fd83928B7e148"
      abi: DInterest
      startBlock: 11316134
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - DPoolList
        - DPool
        - User
        - Deposit
        - Funder
        - Funding
        - UserTotalDeposit
        - FunderTotalInterest
      abis:
        - name: DInterest
          file: ./abis/DInterest.json
        - name: IInterestOracle
          file: ./abis/IInterestOracle.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: MPHIssuanceModel01
          file: ./abis/MPHIssuanceModel01.json
      eventHandlers:
        - event: EDeposit(indexed address,indexed uint256,uint256,uint256,uint256,uint256)
          handler: handleEDeposit
        - event: EWithdraw(indexed address,indexed uint256,indexed uint256,bool,uint256)
          handler: handleEWithdraw
        - event: EFund(indexed address,indexed uint256,uint256)
          handler: handleEFund
        - event: ESetParamAddress(indexed address,indexed string,address)
          handler: handleESetParamAddress
        - event: ESetParamUint(indexed address,indexed string,uint256)
          handler: handleESetParamUint
      blockHandlers:
        - handler: handleBlock
      file: ./src/DInterest.ts
  - kind: ethereum/contract
    name: cUNIPool
    network: mainnet
    source:
      address: "0x19E10132841616CE4790920d5f94B8571F9b9341"
      abi: DInterest
      startBlock: 11316134
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - DPoolList
        - DPool
        - User
        - Deposit
        - Funder
        - Funding
        - UserTotalDeposit
        - FunderTotalInterest
      abis:
        - name: DInterest
          file: ./abis/DInterest.json
        - name: IInterestOracle
          file: ./abis/IInterestOracle.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: MPHIssuanceModel01
          file: ./abis/MPHIssuanceModel01.json
      eventHandlers:
        - event: EDeposit(indexed address,indexed uint256,uint256,uint256,uint256,uint256)
          handler: handleEDeposit
        - event: EWithdraw(indexed address,indexed uint256,indexed uint256,bool,uint256)
          handler: handleEWithdraw
        - event: EFund(indexed address,indexed uint256,uint256)
          handler: handleEFund
        - event: ESetParamAddress(indexed address,indexed string,address)
          handler: handleESetParamAddress
        - event: ESetParamUint(indexed address,indexed string,uint256)
          handler: handleESetParamUint
      blockHandlers:
        - handler: handleBlock
      file: ./src/DInterest.ts
  - kind: ethereum/contract
    name: yCRVPool
    network: mainnet
    source:
      address: "0xe615e59353f70cA2424Aa0F24F49C639B8E924D3"
      abi: DInterest
      startBlock: 11316295
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - DPoolList
        - DPool
        - User
        - Deposit
        - Funder
        - Funding
        - UserTotalDeposit
        - FunderTotalInterest
      abis:
        - name: DInterest
          file: ./abis/DInterest.json
        - name: IInterestOracle
          file: ./abis/IInterestOracle.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: MPHIssuanceModel01
          file: ./abis/MPHIssuanceModel01.json
      eventHandlers:
        - event: EDeposit(indexed address,indexed uint256,uint256,uint256,uint256,uint256)
          handler: handleEDeposit
        - event: EWithdraw(indexed address,indexed uint256,indexed uint256,bool,uint256)
          handler: handleEWithdraw
        - event: EFund(indexed address,indexed uint256,uint256)
          handler: handleEFund
        - event: ESetParamAddress(indexed address,indexed string,address)
          handler: handleESetParamAddress
        - event: ESetParamUint(indexed address,indexed string,uint256)
          handler: handleESetParamUint
      blockHandlers:
        - handler: handleBlock
      file: ./src/DInterest.ts
  - kind: ethereum/contract
    name: crvSBTCPool
    network: mainnet
    source:
      address: "0x681Aaa7CF3F7E1f110842f0149bA8A4AF53Ef2Fd"
      abi: DInterest
      startBlock: 11316753
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - DPoolList
        - DPool
        - User
        - Deposit
        - Funder
        - Funding
        - UserTotalDeposit
        - FunderTotalInterest
      abis:
        - name: DInterest
          file: ./abis/DInterest.json
        - name: IInterestOracle
          file: ./abis/IInterestOracle.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: MPHIssuanceModel01
          file: ./abis/MPHIssuanceModel01.json
      eventHandlers:
        - event: EDeposit(indexed address,indexed uint256,uint256,uint256,uint256,uint256)
          handler: handleEDeposit
        - event: EWithdraw(indexed address,indexed uint256,indexed uint256,bool,uint256)
          handler: handleEWithdraw
        - event: EFund(indexed address,indexed uint256,uint256)
          handler: handleEFund
        - event: ESetParamAddress(indexed address,indexed string,address)
          handler: handleESetParamAddress
        - event: ESetParamUint(indexed address,indexed string,uint256)
          handler: handleESetParamUint
      blockHandlers:
        - handler: handleBlock
      file: ./src/DInterest.ts
  - kind: ethereum/contract
    name: Rewards
    network: mainnet
    source:
      address: "0x98df8D9E56b51e4Ea8AA9b57F8A5Df7A044234e1"
      abi: Rewards
      startBlock: 11316134
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - MPHHolder
        - MPH
      abis:
        - name: Rewards
          file: ./abis/Rewards.json
      eventHandlers:
        - event: RewardAdded(uint256)
          handler: handleRewardAdded
        - event: Staked(indexed address,uint256)
          handler: handleStaked
        - event: Withdrawn(indexed address,uint256)
          handler: handleWithdrawn
        - event: RewardPaid(indexed address,uint256)
          handler: handleRewardPaid
      file: ./src/Rewards.ts
  # - kind: ethereum/contract
  #  name: MPHToken
  #  network: mainnet
  #  source:
  #    address: "0x8888801aF4d980682e47f1A9036e589479e835C5"
  #    abi: MPHToken
  #    startBlock: 11289991
  #  mapping:
  #    kind: ethereum/events
  #    apiVersion: 0.0.4
  #    language: wasm/assemblyscript
  #    entities:
  #      - MPHHolder
  #      - MPH
  #    abis:
  #      - name: MPHToken
  #        file: ./abis/MPHToken.json
  #    eventHandlers:
  #      - event: Transfer(indexed address,indexed address,uint256)
  #        handler: handleTransfer
  #    file: ./src/MPHToken.ts
  - kind: ethereum/contract
    name: MPHIssuanceModel01
    network: mainnet
    source:
      address: "0x36ad542dadc22078511d64b98aff818abd1ac713"
      abi: MPHIssuanceModel01
      startBlock: 11312589
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - DPool
      abis:
        - name: MPHIssuanceModel01
          file: ./abis/MPHIssuanceModel01.json
        - name: DInterest
          file: ./abis/DInterest.json
        - name: ERC20
          file: ./abis/ERC20.json
      callHandlers:
        - function: setPoolDepositorRewardMintMultiplier(address,uint256)
          handler: handleSetDepositorRewardMintMultiplier
        - function: setPoolDepositorRewardTakeBackMultiplier(address,uint256)
          handler: handleSetPoolDepositorRewardTakeBackMultiplier
        - function: setPoolFunderRewardMultiplier(address,uint256)
          handler: handleSetPoolFunderRewardMultiplier
      file: ./src/MPHIssuanceModel01.ts
  - kind: ethereum/contract
    name: Vesting
    network: mainnet
    source:
      address: "0x8943eb8F104bCf826910e7d2f4D59edfe018e0e7"
      abi: Vesting
      startBlock: 11316134
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Vest
      abis:
        - name: Vesting
          file: ./abis/Vesting.json
      callHandlers:
        - function: vest(address,uint256,uint256)
          handler: handleVest
        - function: withdrawVested(address,uint256)
          handler: handleWithdrawVested
      file: ./src/Vesting.ts
templates:
  - kind: ethereum/contract
    name: NFT
    network: mainnet
    source:
      abi: NFT
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Deposit
        - Funding
        - User
        - Funder
        - UserTotalDeposit
        - FunderTotalInterest
      abis:
        - name: NFT
          file: ./abis/NFT.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/NFT.ts
