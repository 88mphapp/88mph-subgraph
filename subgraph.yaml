specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: cDAIPool
    network: mainnet
    source:
      address: "0x11b1c87983f881b3686f8b1171628357faa30038"
      abi: DInterest
      startBlock: 13135260
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - DPoolList
        - DPool
        - User
        - Deposit
        - Funder
        - Funding
        - UserTotalDeposit
        - FunderTotalInterest
      abis:
        - name: DInterest
          file: ./abis/DInterest.json
        - name: IInterestOracle
          file: ./abis/IInterestOracle.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: FundingMultitoken
          file: ./abis/FundingMultitoken.json
        - name: MPHMinter
          file: ./abis/MPHMinter.json
        - name: MoneyMarket
          file: ./abis/MoneyMarket.json
      eventHandlers:
        - event: EDeposit(indexed address,indexed uint256,uint256,uint256,uint256,uint64)
          handler: handleEDeposit
        - event: ETopupDeposit(indexed address,indexed uint64,uint256,uint256,uint256)
          handler: handleETopupDeposit
        - event: EWithdraw(indexed address,indexed uint256,indexed bool,uint256,uint256)
          handler: handleEWithdraw
        - event: EPayFundingInterest(indexed uint256,uint256,uint256)
          handler: handleEPayFundingInterest
        - event: EFund(indexed address,indexed uint64,uint256,uint256)
          handler: handleEFund
        - event: ESetParamAddress(indexed address,indexed string,address)
          handler: handleESetParamAddress
        - event: ESetParamUint(indexed address,indexed string,uint256)
          handler: handleESetParamUint
      blockHandlers:
        - handler: handleBlock
      file: ./src/DInterest.ts
  - kind: ethereum/contract
    name: Vesting
    network: mainnet
    source:
      address: "0xA907C7c3D13248F08A3fb52BeB6D1C079507Eb4B"
      abi: Vesting02
      startBlock: 13134912
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Vest
      abis:
        - name: Vesting02
          file: ./abis/Vesting02.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: DInterest
          file: ./abis/DInterest.json
        - name: IInterestOracle
          file: ./abis/IInterestOracle.json
        - name: MPHMinter
          file: ./abis/MPHMinter.json
      eventHandlers:
        - event: ECreateVest(indexed address,indexed address,uint64,uint64,uint256)
          handler: handleCreateVest
        - event: EUpdateVest(indexed uint64,address,uint64,uint256,uint256,uint256)
          handler: handleUpdateVest
        - event: EWithdraw(indexed address,indexed uint64,uint256)
          handler: handleWithdraw
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/Vesting.ts
  - kind: ethereum/contract
    name: MPHMinter
    network: mainnet
    source:
      address: "0x01c2fee5d6e76ec26162daaf4e336beed01f2651"
      abi: MPHMinter
      startBlock: 13134957
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - DPool
      abis:
        - name: ERC20
          file: ./abis/ERC20.json
        - name: MPHMinter
          file: ./abis/MPHMinter.json
      eventHandlers:
        - event: ESetParamUint(indexed address,indexed string,address,uint256)
          handler: handleESetParamUint
      file: ./src/MPHMinter.ts
  - kind: ethereum/contract
    name: xMPH
    network: mainnet
    source:
      address: "0x1702F18c1173b791900F81EbaE59B908Da8F689b"
      abi: xMPH
      startBlock: 13132358
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - DPool
      abis:
        - name: xMPH
          file: ./abis/xMPH.json
      eventHandlers:
        - event: DistributeReward(uint256)
          handler: handleDistributeReward
      file: ./src/xMPH.ts
templates:
  - kind: ethereum/contract
    name: NFT
    network: mainnet
    source:
      abi: NFT
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Deposit
        - Funding
        - User
        - Funder
        - UserTotalDeposit
        - FunderTotalInterest
      abis:
        - name: NFT
          file: ./abis/NFT.json
        - name: DInterest
          file: ./abis/DInterest.json
        - name: IInterestOracle
          file: ./abis/IInterestOracle.json
        - name: MPHMinter
          file: ./abis/MPHMinter.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/NFT.ts
  - kind: ethereum/contract
    name: FundingMultitoken
    network: mainnet
    source:
      abi: FundingMultitoken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Deposit
        - Funding
        - User
        - Funder
        - UserTotalDeposit
        - FunderTotalInterest
      abis:
        - name: FundingMultitoken
          file: ./abis/FundingMultitoken.json
        - name: DInterest
          file: ./abis/DInterest.json
        - name: IInterestOracle
          file: ./abis/IInterestOracle.json
        - name: MPHMinter
          file: ./abis/MPHMinter.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: DividendsDistributed(indexed uint256,indexed address,indexed address,uint256)
          handler: handleDividendsDistributed
      file: ./src/FundingMultitoken.ts
