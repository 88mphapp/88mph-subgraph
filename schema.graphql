type DPoolList @entity {
  id: ID!
  pools: [DPool!]!
  numPools: BigInt!
  numUsers: BigInt!
  numActiveUsers: BigInt!
  numFunders: BigInt!
}

type DPool @entity {
  id: ID!
  address: String!
  moneyMarket: String!
  stablecoin: String!
  users: [User!]! @derivedFrom(field: "pools")
  numUsers: BigInt!
  deposits: [Deposit!]! @derivedFrom(field: "pool")
  numDeposits: BigInt!
  numActiveDeposits: BigInt!
  totalActiveDeposit: BigDecimal!
  totalHistoricalDeposit: BigDecimal!
  totalInterestPaid: BigDecimal!
  funders: [Funder!]! @derivedFrom(field: "pools")
  numFunders: BigInt!
  fundings: [Funding!]! @derivedFrom(field: "pool")
  numFundings: BigInt!
  blocktime: BigDecimal!
  UIRMultiplier: BigDecimal!
  MinDepositPeriod: BigInt!
  "Values that need to be updated every block"
  oneYearInterestRate: BigDecimal!
  surplus: BigDecimal!
  moneyMarketIncomeIndex: BigInt!
}

type User @entity {
  id: ID!
  address: String!
  pools: [DPool!]!
  numPools: BigInt!
  deposits: [Deposit!]! @derivedFrom(field: "user")
  numDeposits: BigInt!
  numActiveDeposits: BigInt!
  totalActiveDeposit: BigDecimal!
  totalHistoricalDeposit: BigDecimal!
  totalInterestEarned: BigDecimal!
}

type Deposit @entity {
  id: ID!
  nftID: BigInt!
  user: User!
  pool: DPool!
  amount: BigDecimal!
  maturationTimestamp: BigInt!
  active: Boolean!
  depositTimestamp: BigInt!
  interestEarned: BigDecimal!
  fundingID: BigInt!
}

type Funder @entity {
  id: ID!
  address: String!
  pools: [DPool!]!
  numPools: BigInt!
  fundings: [Funding!]! @derivedFrom(field: "funder")
  numFundings: BigInt!
  totalInterestEarned: BigDecimal!
}

type Funding @entity {
  id: ID!
  nftID: BigInt!
  funder: Funder!
  pool: DPool!
  fromDepositID: BigInt!
  toDepositID: BigInt!
  recordedFundedDepositAmount: BigDecimal!
  recordedMoneyMarketIncomeIndex: BigInt!
  initialFundedDepositAmount: BigDecimal!
  fundedDeficitAmount: BigDecimal!
  totalInterestEarned: BigDecimal!
}