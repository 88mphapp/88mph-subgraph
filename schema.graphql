type DPoolList @entity {
  id: ID!
  pools: [DPool!]!
  numPools: BigInt!
}

type DPool @entity {
  id: ID!
  address: String!
  moneyMarket: String!
  stablecoin: String!
  users: [User!]! @derivedFrom(field: "pools")
  numUsers: BigInt!
  numActiveUsers: BigInt!
  deposits: [Deposit!]! @derivedFrom(field: "pool")
  numDeposits: BigInt!
  numActiveDeposits: BigInt!
  sponsors: [Sponsor!]! @derivedFrom(field: "pools")
  numSponsors: BigInt!
  numActiveSponsors: BigInt!
  sponsorDeposits: [SponsorDeposit!]! @derivedFrom(field: "pool")
  numSponsorDeposits: BigInt!
  numActiveSponsorDeposits: BigInt!
  totalActiveDeposit: BigDecimal!
  totalHistoricalDeposit: BigDecimal!
  totalInterestPaid: BigDecimal!
  blocktime: BigDecimal!
  UIRMultiplier: BigDecimal!
  MinDepositPeriod: BigInt!
  "Values that need to be updated every block"
  oneYearInterestRate: BigDecimal!
  deficit: BigDecimal!
}

type User @entity {
  id: ID!
  address: String!
  pools: [DPool!]!
  numPools: BigInt!
  deposits: [Deposit!]! @derivedFrom(field: "user")
  numDeposits: BigInt!
  numActiveDeposits: BigInt!
  totalActiveDeposit: BigDecimal!
  totalHistoricalDeposit: BigDecimal!
  totalInterestEarned: BigDecimal!
}

type Deposit @entity {
  id: ID!
  user: User!
  pool: DPool!
  amount: BigDecimal!
  maturationTimestamp: BigInt!
  active: Boolean!
  interestEarned: BigDecimal!
}

type Sponsor @entity {
  id: ID!
  address: String!
  pools: [DPool!]!
  numPools: BigInt!
  deposits: [SponsorDeposit!]! @derivedFrom(field: "sponsor")
  numDeposits: BigInt!
  numActiveDeposits: BigInt!
  totalActiveDeposit: BigDecimal!
  totalHistoricalDeposit: BigDecimal!
}

type SponsorDeposit @entity {
  id: ID!
  sponsor: Sponsor!
  pool: DPool!
  amount: BigDecimal!
  maturationTimestamp: BigInt!
  active: Boolean!
  data: String!
}